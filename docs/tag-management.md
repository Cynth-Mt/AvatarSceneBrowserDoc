# 标签管理系统

## 概述

标签管理系统是Avatar Scene Browser的核心功能之一，它允许您为场景添加自定义标签进行分类，并通过标签快速筛选和组织场景。强大的标签管理工具让大型项目的场景管理变得井然有序。

## 标签系统的作用

### 场景分类
- 🏷️ **功能分类**：按功能划分（角色展示、环境测试、原型验证等）
- 📊 **进度管理**：按开发状态分类（完成、开发中、待修复）
- 👥 **团队协作**：按负责人或团队分类
- 🎨 **风格分类**：按艺术风格或主题分类

### 快速筛选
- 🔍 **一键筛选**：点击标签即可显示相关场景
- 📋 **多标签组合**：同时使用多个标签进行精确筛选
- 📈 **使用统计**：查看每个标签关联的场景数量

## 基本标签操作

### 为场景添加标签

1. **选择场景**
   - 在场景预览区点击选择目标场景
   - 选中的场景会在右侧详情面板显示详细信息

2. **添加新标签**
   - 在右侧详情面板找到"添加标签"下拉菜单
   - 输入新标签名称（如：角色、室内、测试等）
   - 按Enter键或点击确认按钮完成添加

3. **选择已有标签**
   - 点击"添加标签"下拉菜单
   - 从列表中选择已存在的标签
   - 标签会立即应用到选中的场景

### 查看场景标签

已添加的标签会显示在：
- 右侧详情面板的标签区域
- 场景缩略图下方（如果空间允许）
- 标签列表中会显示使用该标签的场景数量

## 标签管理窗口

### 打开标签管理窗口

有两种方式访问标签管理功能：

1. **主窗口按钮**：在左侧标签区点击 **"管理标签"** 按钮
2. **详情面板按钮**：在右侧详情面板点击标签管理相关按钮

### 界面布局

标签管理窗口采用双栏布局：

```
┌─────────────────┬─────────────────────┐
│                 │                     │
│   标签列表      │     编辑面板        │
│                 │                     │
│ • 标签A (5)     │  ┌─────────────────┐ │
│ • 标签B (3)     │  │  编辑标签内容   │ │
│ • 标签C (8)     │  │                 │ │
│ • ...           │  │  [保存] [取消]  │ │
│                 │  └─────────────────┘ │
│                 │                     │
│ [搜索框]        │   [空闲状态提示]    │
│ [排序选项]      │                     │
│                 │                     │
└─────────────────┴─────────────────────┘
```

### 左侧：标签列表
- **标签列表**：显示所有已创建的标签
- **使用统计**：显示每个标签关联的场景数量
- **搜索框**：快速查找特定标签
- **排序选项**：按名称、使用频率等排序

### 右侧：编辑面板
- **空闲状态**：显示使用提示和操作指南
- **编辑状态**：显示选中标签的编辑界面
- **操作按钮**：保存、取消、删除等操作

## 高级标签管理功能

### 编辑标签

1. **选择标签**
   - 在左侧标签列表中点击要编辑的标签
   - 右侧面板会切换到编辑模式

2. **修改标签信息**
   - 编辑标签名称
   - 选择标签颜色
   - 添加标签描述（如果支持）

3. **保存更改**
   - 点击"保存"按钮确认修改
   - 或点击"取消"放弃更改

### 删除标签

1. **选择要删除的标签**
   - 在标签列表中选中目标标签

2. **确认删除**
   - 点击"删除"按钮
   - 确认删除操作（注意：删除后无法恢复）

3. **清理关联**
   - 系统会自动从所有场景中移除该标签
   - 更新标签统计信息

### 标签颜色管理

每个标签可以设置不同的颜色以便区分：

- **预设颜色**：提供多种预设颜色方案
- **自定义颜色**：使用颜色选择器自定义颜色
- **颜色预览**：实时预览颜色效果
- **颜色应用**：颜色会应用到标签显示和筛选按钮

## 标签筛选功能

### 基本筛选

在主窗口左侧标签区：
1. **全部场景**：显示所有场景，不进行筛选
2. **单标签筛选**：点击任意标签只显示包含该标签的场景
3. **清除筛选**：再次点击"全部场景"清除当前筛选

### 高级筛选（未来功能）

计划中的高级筛选功能：
- **多标签AND操作**：同时包含多个指定标签的场景
- **多标签OR操作**：包含任意指定标签的场景
- **标签排除**：不包含特定标签的场景
- **保存筛选条件**：保存常用的筛选组合

## 最佳实践

### 标签命名规范

建议采用一致的标签命名规范：

1. **功能型标签**
   - 角色展示
   - 环境测试
   - 物理测试
   - UI测试

2. **状态型标签**
   - 完成
   - 开发中
   - 需修复
   - 待审核

3. **类型型标签**
   - 室内场景
   - 室外场景
   - 抽象场景
   - 演示场景

### 标签使用技巧

1. **分层分类**
   ```
   大类别 → 具体分类
   例如：环境 → 室内 → 客厅
        角色 → 人类 → 男性
   ```

2. **组合使用**
   ```
   场景可以同时拥有多个标签：
   "客厅" + "室内" + "完成" + "角色展示"
   ```

3. **定期清理**
   - 删除不再使用的标签
   - 合并意义相近的标签
   - 统一标签命名风格

## 团队协作

### 标签规范化

在团队项目中建立标签规范：

1. **统一命名**
   - 制定标签命名规则
   - 使用统一的语言（中文/英文）
   - 避免意义重复的标签

2. **权限管理**
   - 指定标签管理负责人
   - 避免随意创建和删除标签
   - 定期审查标签使用情况

3. **文档记录**
   - 维护标签使用文档
   - 记录每个标签的用途和使用规则
   - 新成员培训时提供标签指南

### 数据同步

确保团队间标签数据同步：
- 将`tags.json`文件纳入版本控制
- 定期同步标签数据
- 解决标签冲突时遵循既定规则

## 技术实现细节

### 数据存储

标签数据存储在`tags.json`文件中：

```json
{
  "tags": [
    {
      "name": "角色展示",
      "color": "#FF6B6B",
      "description": "用于展示角色模型的场景",
      "createdTime": "2023-12-01T10:00:00Z",
      "usageCount": 5
    }
  ]
}
```

### 标签关联

场景与标签的关联存储在`scenes_data.json`中：

```json
{
  "scenes": [
    {
      "scenePath": "Assets/MyScene.unity",
      "sceneGUID": "a1b2c3d4...",
      "tags": ["角色展示", "室内", "完成"]
    }
  ]
}
```

## 性能优化

### 大量标签处理

当项目中有大量标签时：
- **虚拟化列表**：只渲染可见的标签项
- **搜索优化**：实现快速搜索功能
- **延迟加载**：分批加载标签统计信息

### 内存管理

- **标签缓存**：缓存常用标签信息
- **事件驱动**：使用事件系统更新标签状态
- **垃圾回收**：及时清理不再使用的标签对象

## 已完成的改进

### UI/UX 优化
✅ **标签管理入口优化**：添加了直观的管理按钮，替代右键菜单访问  
✅ **按钮视觉优化**：使用鲜明颜色和图标增强可见性  
✅ **集成式编辑界面**：将编辑功能集成到右侧面板，提供流畅体验  
✅ **动态面板设计**：实现空闲状态/编辑状态的智能切换  
✅ **GUI状态管理**：修复Unity EditorGUI状态管理问题  

### 功能完善
✅ **颜色管理系统**：为标签提供颜色区分功能  
✅ **使用统计**：显示每个标签的场景关联数量  
✅ **批量操作基础**：为未来的批量操作奠定基础  

## 未来计划

### 短期改进
- 🔄 **拖拽重排序**：允许拖拽重新排列标签优先级
- 📋 **批量操作**：选择多个标签进行批量删除或修改
- ⏮️ **历史记录**：添加撤销/重做功能
- ⌨️ **快捷键支持**：添加键盘快捷键操作

### 长期扩展
- 🗂️ **标签分组**：创建标签分类或分组系统
- 📤 **导入/导出**：支持标签的导入和导出
- 📊 **使用分析**：添加标签使用趋势和相关性分析
- 🤖 **智能建议**：基于场景内容自动推荐标签

---

标签管理系统让Avatar Scene Browser从简单的场景浏览工具升级为强大的场景组织平台。通过合理使用标签功能，您可以显著提高大型Unity项目的场景管理效率。 